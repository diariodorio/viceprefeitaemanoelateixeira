"use strict";(function(){var v;(function(e){e[e.Untriggered=0]="Untriggered",e[e.Triggered=1]="Triggered"})(v||(v={}));function T(e){return T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(e)}function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,C(n.key),n)}}function ee(e,t,r){return t&&x(e.prototype,t),r&&x(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function te(e,t,r){return t=C(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e){var t=re(e,"string");return T(t)==="symbol"?t:String(t)}function re(e,t){if(T(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(T(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var O=function(){function e(t,r){X(this,e),te(this,"status",v.Untriggered),this.templates=t,this.siteId=r}return ee(e,[{key:"insertTemplateToDOM",value:function(r){var n,o,i,s,u=document.createElement("div"),a=this.templates[r.template].html,l="<style>".concat(this.templates[r.template].styles,"</style>");r.shadowDOM&&u.attachShadow&&u.attachShadow({mode:"open"}),u.className=r.wrapperClassName||"",u.shadowRoot?u.shadowRoot.innerHTML=a+l:u.innerHTML=a+l,r.position==="afterend"?(n=r.parent)===null||n===void 0||(o=n.parentElement)===null||o===void 0||o.insertBefore(u,(i=r.parent)===null||i===void 0?void 0:i.nextSibling):(s=r.parent)===null||s===void 0||s.appendChild(u)}},{key:"getElements",value:function(r,n){return r?[].slice.call((r.shadowRoot||r).querySelectorAll(n)):[]}},{key:"createURL",value:function(r){return typeof URL=="function"?new URL(r):r}},{key:"logEvent",value:function(r){var n,o,i=this.createURL("https://c.content-rec.com/form-event"),s=document.createElement("img"),u=((n=window.sessionStorage)===null||n===void 0?void 0:n.getItem("MG_Session_pr"))||"",a=((o=window.localStorage)===null||o===void 0?void 0:o.getItem("mgMuidn"))||"";s.src=i+"?event="+r+"&nt="+this.selectedTest.name+"&nf="+this.selectedTest.form.template+"&csid="+this.siteId+"&pr="+u+"&muidn="+a,s.style.display="none",document.body.appendChild(s)}}]),e}();function b(e){return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(e)}function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,W(n.key),n)}}function oe(e,t,r){return t&&U(e.prototype,t),r&&U(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D(e,t)}function D(e,t){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},D(e,t)}function se(e){var t=ae();return function(){var n=E(e),o;if(t){var i=E(this).constructor;o=Reflect.construct(n,arguments,i)}else o=n.apply(this,arguments);return ue(this,o)}}function ue(e,t){if(t&&(b(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}function P(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},E(e)}function F(e,t,r){return t=W(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W(e){var t=le(e,"string");return b(t)==="symbol"?t:String(t)}function le(e,t){if(b(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(b(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var R=function(e){ie(r,e);var t=se(r);function r(n,o,i){var s;return ne(this,r),s=t.call(this,o,i),F(P(s),"triggers",{}),F(P(s),"emailWrapperClassName","mg-subscription-shadow-email"),F(P(s),"pushWrapperClassName","mg-subscription-shadow-push"),s.tests=n,s.triggers={timeout:function(){var a;setTimeout(function(){s.run()},((a=s.selectedTest.trigger.config)===null||a===void 0?void 0:a.timeout)||0)},scroll:function(){document.addEventListener("scroll",function(){s.status===v.Untriggered&&s.run()})},leaveDocument:function(){document.body.addEventListener("mouseleave",function(a){a.clientY<100&&s.status===v.Untriggered&&s.run()})},trafficSource:function(){s.trafficSourceTrigger()},uniquePagesBySession:function(){var a;s.siteViewsTrigger((a=window.localStorage)===null||a===void 0?void 0:a.getItem("_mgSessionPagesNumber"))},sessions:function(){var a;s.siteViewsTrigger((a=window.localStorage)===null||a===void 0?void 0:a.getItem("_mgSessionsNumber"))}},s}return oe(r,[{key:"makeAbDecision",value:function(o){var i=localStorage.getItem(o);if(i!==null)return parseInt(i);var s=Math.floor(Math.random()*100)+1,u=Math.floor(100/this.tests.length),a=Math.floor(s/u);return localStorage.setItem(o,a.toString()),a}},{key:"observingForm",value:function(o,i,s){var u=this,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(typeof IntersectionObserver=="function"){var l=a*1e3,m,f=!1,p,c=new IntersectionObserver(function(y){y.forEach(function(h){h.intersectionRatio>=s&&!f&&(f=!0,m=new Date().getTime(),p=setInterval(function(){h.intersectionRatio>=s&&new Date().getTime()-m>=l&&(clearInterval(p),u.logEvent(o),c.unobserve(h.target))},10)),h.intersectionRatio<s&&(clearInterval(p),f=!1)})},{threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]});i&&c.observe(i)}}},{key:"runTrigger",value:function(){var o,i=this.triggers[(o=this.selectedTest)===null||o===void 0?void 0:o.trigger.name];i?i():console.log("A/B decision isn't done")}},{key:"siteViewsTrigger",value:function(o){var i,s,u=(i=this.selectedTest.trigger.config)===null||i===void 0?void 0:i.min,a=(s=this.selectedTest.trigger.config)===null||s===void 0?void 0:s.max;o&&u!==void 0&&a!==void 0&&parseInt(o)>=u&&parseInt(o)<=a&&this.run()}},{key:"trafficSourceTrigger",value:function(){var o,i,s,u,a,l=this,m=(o=window.sessionStorage)===null||o===void 0?void 0:o.getItem("MG_Session_pr"),f=(i=(s=document.referrer.match(/:\/\/([^/:]+)/i))===null||s===void 0?void 0:s[1])!==null&&i!==void 0?i:null,p=m||f,c=(u=this.selectedTest.trigger.config)===null||u===void 0?void 0:u.whiteList,y=(a=this.selectedTest.trigger.config)===null||a===void 0?void 0:a.blackList,h=function(Z,Y){if(p){var A=Z.filter(function(Q){return p.match(Q)});(Y==="white"?A.length:!A.length)&&l.run()}};c!=null&&c.length&&h(c,"white"),y!=null&&y.length&&!(c!=null&&c.length)&&h(y,"black")}}]),r}(O);var d;(function(e){e.Requests="push_form_requests",e.Impressions="push_form_impressions",e.SubscribeCustomForm="push_subscribe_custom_form",e.DeclineCustomForm="push_decline_custom_form",e.CloseCustomForm="push_close_custom_form",e.SubscribeBrowserForm="push_subscribe_browser_form",e.DeclineBrowserForm="push_decline_browser_form",e.CloseBrowserForm="push_close_browser_form"})(d||(d={}));var g;(function(e){e.Subscribe="email_form_subscribe",e.WrongAddress="email_form_wrong_address",e.NoSubscribe="email_form_no_subscribe",e.Impressions="email_form_impressions",e.Shows="email_form_requests"})(g||(g={}));function _(e){return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(e)}function ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,z(n.key),n)}}function fe(e,t,r){return t&&q(e.prototype,t),r&&q(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function me(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M(e,t)}function M(e,t){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},M(e,t)}function pe(e){var t=de();return function(){var n=I(e),o;if(t){var i=I(this).constructor;o=Reflect.construct(n,arguments,i)}else o=n.apply(this,arguments);return ve(this,o)}}function ve(e,t){if(t&&(_(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}function k(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function de(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},I(e)}function L(e,t,r){return t=z(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z(e){var t=ye(e,"string");return _(t)==="symbol"?t:String(t)}function ye(e,t){if(_(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(_(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var K=function(e){me(r,e);var t=pe(r);function r(n,o,i){var s;return ce(this,r),s=t.call(this,n,o,i),L(k(s),"pushSuccessStatus","content-rec-push-success"),L(k(s),"pushLastTime","content-rec-push-last-time"),L(k(s),"pushTimeLimit",86400*30*1e3),s.selectedTest=s.tests[s.makeAbDecision("content-rec-push-decision")]||s.tests[0],s}return fe(r,[{key:"run",value:function(){var o=this;if(!(!this.isFormNeeded()||!this.isPushSupported())){this.status=v.Triggered,this.insertTemplateToDOM({parent:document.body,template:this.selectedTest.form.template,position:"beforeend",shadowDOM:!0,wrapperClassName:this.pushWrapperClassName}),this.logEvent(d.Requests);var i=this.getElements(document.body,".".concat(this.pushWrapperClassName))[0],s=this.getElements(i,".form-push")[0],u=this.getElements(i,".mgSubscribeAllowButton")[0],a=this.getElements(i,".mgSubscribeDeclineButton")[0],l=this.getElements(i,".mgSubscribeCloseButton")[0];this.observingForm(d.Impressions,s,1),u==null||u.addEventListener("click",function(){o.logEvent(d.SubscribeCustomForm),o.triggerSubscription(),i==null||i.remove()}),a==null||a.addEventListener("click",function(){localStorage.setItem(o.pushLastTime,String(new Date().getTime())),o.logEvent(d.DeclineCustomForm),i==null||i.remove()}),l==null||l.addEventListener("click",function(){o.logEvent(d.CloseCustomForm),i==null||i.remove()})}}},{key:"isFormNeeded",value:function(){var o=this.getElements(document.body,".mg-subscription-popup-wrapper")[0],i=localStorage.getItem(this.pushLastTime);return i&&new Date().getTime()-Number(i)<=this.pushTimeLimit?!1:localStorage.getItem(this.pushSuccessStatus)!=="1"&&!o}},{key:"isPushSupported",value:function(){if(/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)){var o=navigator.userAgent.indexOf("Version")+8,i=o+4,s=parseFloat(navigator.userAgent.substring(o,i));return"PushManager"in window&&!isNaN(s)&&s>=16.1}return"PushManager"in window}},{key:"getParameters",value:function(){var o,i;return{url:location.href,event:"activate",cookie:document.cookie,referrer:document.referrer||"",muidn:localStorage.getItem("mgMuidn")||"",abName:(o=this.selectedTest)===null||o===void 0?void 0:o.name,formName:(i=this.selectedTest)===null||i===void 0?void 0:i.form.template}}},{key:"triggerSubscription",value:function(){var o=this,i="/firebase-messaging-sw.js?t=7";Notification.requestPermission().then(function(s){s==="denied"?o.logEvent(d.DeclineBrowserForm):s==="default"?o.logEvent(d.CloseBrowserForm):s==="granted"&&(o.logEvent(d.SubscribeBrowserForm),navigator.serviceWorker.getRegistrations().then(function(u){for(var a=0;a<u.length;a++){var l,m;if(((l=u[a])===null||l===void 0||(m=l.active)===null||m===void 0?void 0:m.scriptURL.indexOf(i))!==-1){var f,p;(f=u[a])===null||f===void 0||(p=f.active)===null||p===void 0||p.postMessage(JSON.stringify(o.getParameters())),localStorage.setItem(o.pushSuccessStatus,"1");return}}navigator.serviceWorker.register(i,{scope:"/firebase-cloud-messaging-push-scope"}).then(function(c){setTimeout(function(){c.active&&(c.active.postMessage(JSON.stringify(o.getParameters())),localStorage.setItem(o.pushSuccessStatus,"1"))},1e3)}),navigator.serviceWorker.ready.then(function(c){var y;c==null||(y=c.active)===null||y===void 0||y.postMessage(JSON.stringify(o.getParameters())),localStorage.setItem(o.pushSuccessStatus,"1")})}))})}}]),r}(R);function w(e){return w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(e)}function ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,be(n.key),n)}}function he(e,t,r){return t&&H(e.prototype,t),r&&H(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function be(e){var t=_e(e,"string");return w(t)==="symbol"?t:String(t)}function _e(e,t){if(w(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(w(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function we(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B(e,t)}function B(e,t){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},B(e,t)}function Se(e){var t=Pe();return function(){var n=N(e),o;if(t){var i=N(this).constructor;o=Reflect.construct(n,arguments,i)}else o=n.apply(this,arguments);return Te(this,o)}}function Te(e,t){if(t&&(w(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Oe(e)}function Oe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function N(e){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},N(e)}var V=function(e){we(r,e);var t=Se(r);function r(n,o,i){var s;return ge(this,r),s=t.call(this,n,o),s.selectedTest=i,s.popup=s.selectedTest.form.popup,s.buildPopup(),s}return he(r,[{key:"buildPopup",value:function(){this.popup&&(this.status=v.Triggered,this.insertTemplateToDOM({parent:document.body,template:this.popup.template,position:"beforeend",shadowDOM:!1,wrapperClassName:"mg-subscription-popup-wrapper"}),this.closePopup())}},{key:"closePopup",value:function(){var o=this,i=this.getElements(document.body,".mg-subscription-popup")[0];if(i){var s=this.getElements(i,".mg-subscription-popup-close")[0];s==null||s.addEventListener("click",function(){var u;(u=i.parentElement)===null||u===void 0||u.removeChild(i),o.status=v.Untriggered})}}}]),r}(O);function S(e){return S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(e)}function Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ke(n.key),n)}}function Re(e,t,r){return t&&G(e.prototype,t),r&&G(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ke(e){var t=Ie(e,"string");return S(t)==="symbol"?t:String(t)}function Ie(e,t){if(S(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(S(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$(e,t)}function $(e,t){return $=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},$(e,t)}function je(e){var t=Le();return function(){var n=j(e),o;if(t){var i=j(this).constructor;o=Reflect.construct(n,arguments,i)}else o=n.apply(this,arguments);return Fe(this,o)}}function Fe(e,t){if(t&&(S(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return De(e)}function De(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Le(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},j(e)}var J=function(e){Ne(r,e);var t=je(r);function r(n,o,i,s){var u;return Ee(this,r),u=t.call(this,n,o,i),u.id="id-"+s,u.selectedTest=u.tests[u.makeAbDecision("content-rec-email-decision-".concat(s))]||u.tests[0],u}return Re(r,[{key:"run",value:function(){if(!localStorage.getItem("mg-email-subscribed")){this.insertForm();var o=this.getElements(document.body,".".concat(this.emailWrapperClassName,".").concat(this.id))[0],i=this.getElements(o,".mg-subscription-form")[0];i&&this.formHandling(i)}}},{key:"insertForm",value:function(){var o=this.getElements(document.body,".".concat(this.pushWrapperClassName))[0],i=this.selectedTest.form.parentSelector;this.selectedTest.form.popup&&(o||new V(this.templates,this.siteId,this.selectedTest),i=".mg-subscription-popup-inner");var s=i?this.getElements(document.body,i)[0]:null;s&&(this.insertTemplateToDOM({parent:s,template:this.selectedTest.form.template,position:"afterend",shadowDOM:!0,wrapperClassName:this.emailWrapperClassName+" "+this.id}),this.logEvent(g.Shows),this.status=v.Triggered)}},{key:"formHandling",value:function(o){var i=this,s=this.getElements(o,".mg-subscription-form-input")[0],u=this.getElements(o,".mg-subscription-form-error")[0];this.observingForm(g.Impressions,o,.5),s&&u&&(this.detectInactivity(s),s.addEventListener("focus",function(){s.classList.remove("error"),u.style.display="none"}),o.addEventListener("submit",function(a){a.preventDefault();var l=s.value.trim(),m=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,f=m.test(l);f?(i.makeRequest(l),i.afterSubscribing()):(s.classList.add("error"),u.style.display="block",i.logEvent(g.WrongAddress))}))}},{key:"detectInactivity",value:function(o){var i=this,s=60*1e3,u=this.selectedTest.form.inactivity?this.selectedTest.form.inactivity*1e3:s,a,l=function(){clearTimeout(a)},m=function f(){clearTimeout(a),a=setTimeout(function(){i.logEvent(g.NoSubscribe),o.removeEventListener("keydown",l),o.removeEventListener("keyup",f)},u)};o.addEventListener("keydown",l),o.addEventListener("keyup",m)}},{key:"makeRequest",value:function(o){var i,s,u=this.createURL("https://c.content-rec.com/mail-subscribe"),a=(i=this.selectedTest)===null||i===void 0?void 0:i.name,l=(s=this.selectedTest)===null||s===void 0?void 0:s.form.template,m=-(new Date().getTimezoneOffset()/60),f=localStorage.getItem("mgMuidn")||"",p=document.createElement("img");p.src=u+"?email="+o+"&abname="+a+"&formname="+l+"&tz="+m+"&muidn="+f,p.style.display="none",document.body.appendChild(p)}},{key:"afterSubscribing",value:function(){var o=this,i=this.getElements(document.body,".mg-subscription-popup-wrapper")[0],s=this.getElements(document.body,".".concat(this.emailWrapperClassName));s.forEach(function(u){var a=o.getElements(u,".mg-subscription-thanks")[0],l=o.getElements(u,".mg-subscription-form-wrapper")[0];l.style.display="none",a.style.display="block"}),setTimeout(function(){var u;i==null||(u=i.parentElement)===null||u===void 0||u.removeChild(i)},2e3),this.logEvent(g.Subscribe),localStorage.setItem("mg-email-subscribed","true")}}]),r}(R);(function(){var e,t,r={"tests":{"push":[],"email":[]},"domains":["diariodorio.com"]},n=[],o=796531;if(r.domains.indexOf(window.location.hostname)===-1){console.log("Retention tool is not allowed on current domain");return}(e=r.tests.push)!==null&&e!==void 0&&e.length&&new K(r.tests.push[0],n,o).runTrigger(),(t=r.tests.email)!==null&&t!==void 0&&t.length&&r.tests.email.forEach(function(i,s){new J(i,n,o,s.toString()).runTrigger()})})();})();
